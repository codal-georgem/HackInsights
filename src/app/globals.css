@import "tailwindcss";
@config "../../tailwind.config.ts";

/* Required in Tailwind v4 for dark: utility classes to work with class strategy */
@custom-variant dark (&:is(.dark *));

@theme {
  /* Light mode defaults — overridden by .dark class via JS (next-themes) */
  /* Raw values here so Tailwind v4 opacity modifiers (/10, /20, etc.) work */
  --color-brand-bg: #f3f4f6;
  --color-brand-surface: #ffffff;
  --color-brand-surface-2: #f9fafb;
  --color-brand-border: #d1d5db;
  --color-brand-primary: #4432F5;
  --color-brand-primary-light: #6457F0;
  --color-brand-primary-glow: rgba(68, 50, 245, 0.35);
  --color-brand-text: #111827;
  --color-brand-muted: #6b7280;
  --color-brand-card-bg: rgba(255, 255, 255, 0.75);

  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
  --font-mono: var(--font-geist-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  --animate-shimmer: shimmer 2s linear infinite;
}

@keyframes shimmer {
  from {
    transform: translateX(-100%);
  }

  to {
    transform: translateX(100%);
  }
}

/* Prevent double scrollbars - let the app handle scrolling internally */
html,
body {
  overflow: hidden;
  height: 100%;
  width: 100%;
  overscroll-behavior: none;
  /* Prevent bounce scrolling on some browsers */
}

/* ── Codal brand tokens (derived from public/codal-logo.png) ─────────────── */
:root {
  color-scheme: light;
  /* Light mode tokens (Cool Gray / Indigo tint) */
  --c-bg: #f3f4f6;
  /* Gray-100 - slightly darker than pure white for contrast */
  --c-surface: #ffffff;
  --c-surface-2: #f9fafb;
  /* Gray-50 */
  --c-border: #d1d5db;
  /* Gray-300 */
  --c-primary: #4432F5;
  /* Keep brand primary */
  --c-primary-light: #6457F0;
  --c-primary-glow: rgba(68, 50, 245, 0.15);
  /* Softer glow for light mode */
  --c-text: #111827;
  /* Gray-900 - sharp text */
  --c-muted: #6b7280;
  /* Gray-500 */
  --c-card-bg: rgba(255, 255, 255, 0.75);
  /* Glassy white */

  --font-geist-sans: "Geist Sans", sans-serif;
  --font-geist-mono: "Geist Mono", monospace;
  --foreground: #111827;
  --background: #f3f4f6;
}

[class~="dark"] {
  color-scheme: dark;
  /* Dark mode CSS variable tokens (used for direct var() references in CSS) */
  --c-bg: #0B1120;
  --c-surface: #151E32;
  --c-surface-2: #1E293B;
  --c-border: #334155;
  --c-primary: #6366f1;
  --c-primary-light: #818cf8;
  --c-primary-glow: rgba(99, 102, 241, 0.4);
  --c-text: #F1F5F9;
  --c-muted: #94A3B8;
  --c-card-bg: #1e293b;

  --foreground: #F1F5F9;
  --background: #0B1120;

  /* Override @theme tokens for dark mode so Tailwind utility classes
     (text-brand-primary, bg-brand-primary/10, etc.) use dark palette */
  --color-brand-bg: #0B1120;
  --color-brand-surface: #151E32;
  --color-brand-surface-2: #1E293B;
  --color-brand-border: #334155;
  --color-brand-primary: #6366f1;
  --color-brand-primary-light: #818cf8;
  --color-brand-primary-glow: rgba(99, 102, 241, 0.4);
  --color-brand-text: #F1F5F9;
  --color-brand-muted: #94A3B8;
  --color-brand-card-bg: #1e293b;
}


body {
  color: var(--c-text);
  background: var(--c-bg);
  font-family: var(--font-geist-sans), sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* ── Tiptap / ProseMirror editor styles ──────────────────────────────────── */
.ProseMirror {
  outline: none;
  min-height: 120px;
  color: var(--c-text) !important;
  caret-color: var(--c-text);
  font-size: 0.875rem;
  line-height: 1.6;
  padding: 0.75rem 1rem;
}

.ProseMirror p {
  margin: 0 0 0.25rem;
}

.ProseMirror p:last-child {
  margin-bottom: 0;
}

.ProseMirror strong {
  color: var(--c-text);
  font-weight: 700;
}

.ProseMirror em {
  color: var(--c-text);
  font-style: italic;
  opacity: 0.9;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  color: var(--c-muted);
  pointer-events: none;
  float: left;
  height: 0;
  font-size: 0.75rem;
  /* text-xs for mobile */
}

@media (min-width: 640px) {
  .ProseMirror p.is-editor-empty:first-child::before {
    font-size: 1rem;
    /* text-base for sm and up */
  }
}


/* ── Feedback wall card glow on hover ────────────────────────────────────── */
.feedback-card:hover {
  box-shadow: 0 0 0 1px var(--c-border), 0 8px 32px var(--c-primary-glow);
}

/* Hide scrollbar for Chrome, Safari and Opera */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scrollbar-hide {
  -ms-overflow-style: none;
  /* IE and Edge */
  scrollbar-width: none;
  /* Firefox */
}